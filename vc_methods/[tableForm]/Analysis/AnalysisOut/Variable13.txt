//%attributes = {"lang":"en"} comment added and reserved by 4D.
vTitle:=Get localized string("Analysis Codes")
QUERY([Analysis];[Analysis]Code=<>sFacility+"@";*)
QUERY([Analysis]; & ;[Analysis]SortOrder<=50;*)
QUERY([Analysis]; & ;[Analysis]RecChg=True)
APPLY TO SELECTION([Analysis];[Analysis]RecChg:=False)
QUERY([Analysis];[Analysis]Code=<>sFacility+"@";*)
QUERY([Analysis]; & ;[Analysis]SortOrder>50;*)
QUERY([Analysis]; & ;[Analysis]RecChg=False)
APPLY TO SELECTION([Analysis];[Analysis]RecChg:=True)
QUERY([Analysis];[Analysis]Code=<>sFacility+"@")
ORDER BY([Analysis];[Analysis]RecChg;>;[Analysis]SortOrder;>;[Analysis]Code;>)
BREAK LEVEL(1)
ACCUMULATE([Analysis]DfltSellAmt)
FORM SET OUTPUT([Analysis];"PrintAnalysis")
PrintSelection ("P";->[Analysis])
FORM SET OUTPUT("AnalysisOut")
QUERY([Analysis];[Analysis]Code=<>sFacility+"@";*)
If (aAnalysis=1)
QUERY([Analysis]; & ;[Analysis]SortOrder<=50)
Else 
QUERY([Analysis]; & ;[Analysis]SortOrder>50)
End if 
ORDER BY([Analysis];[Analysis]SortOrder;>;[Analysis]Code;>)